å¦‚æœå¸Œæœ›ä½¿ç”¨GitHub Actionséƒ¨ç½²åˆ° `gh-pages` ä¸Šï¼Œä¸€å®šè¦æ³¨æ„çš„äº‹é¡¹ã€‚

## 1. è®¾ç½® workflows
è¿™ä¸ªå¯ä»¥æŒ‰ç…§å®˜ç½‘ä¸Šå»å®Œæˆï¼Œé…ç½®å¦‚ä¸‹ï¼š
```yaml
name: Deploy

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v3
        with:
          node-version: 16
          cache: yarn
      - run: yarn install --frozen-lockfile

      - name: Build
        run: yarn docs:build

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: docs/.vitepress/dist
```
å¦‚æœä½¿ç”¨ `pnmp`ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢é…ç½®ï¼š
```yaml
name: Deploy

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: pnpm/action-setup@v2.2.2
        with:
          version: latest
          run_install: |
            -args: [--frozen-lockfile. --strict-peer-dependencies]
      - uses: actions/setup-node@v3
        with:
          node-version: 16
          cache: pnpm
      - run: pnpm install

      - name: Build
        run: pnpm run docs:build

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: docs/.vitepress/dist
```

## 2. è®¾ç½®GitHub Page source
å¦‚å›¾ï¼š
![gh-pages](./imgs/gh-pages.png)


## 3. æœ€é‡è¦çš„ä¸€æ­¥

å› ä¸ºæˆ‘çš„ gh-pages åœ°å€æ˜¯ `jamessawyer.github.io/deep-javascript-cn`ï¼Œä¸€å¼€å§‹æˆ‘çš„ `.vitepress/config.js` é…ç½®å¦‚ä¸‹ï¼š
```js
export default {
  title: 'Deep JavaScript',
  description: 'A book in the depths of JavaScript',
  lastUpdated: true,
  // base: '/deep-javascript-cn/', // ğŸš¨ä¸€å¼€å§‹æ²¡å†™è¿™ä¸€è¡Œ
  themeConfig: {
    editLink: {
      text: 'åœ¨GitHubç¼–è¾‘æ­¤é¡µ',
      pattern: 'https://github.com/jamessawyer/deep-javascript-cn/edit/main/docs/:path'
    },
    sidebar: [
      {
        text: '2.ç±»å‹ï¼Œå€¼ï¼Œå’Œå˜é‡',
        collapsible: true,
        items: [
          {
            text: '2.âš¡JSä¸­çš„ç±»å‹å¼ºè½¬',
            link: '/2/Type-coercion-in-JavaScript',
          },
          {
            text: '3.âš¡ç¯å¢ƒ-å˜é‡çš„å¹•å',
            link: '/2/Environments-under-the-hood-of-variables'
          }
        ]
      },
      {
        text: '3.å¤„ç†æ•°æ®',
        collapsible: true,
        items: []
      },
      {
        text: '4.OOPï¼šå¯¹è±¡å±æ€§ç‰¹æ€§',
        collapsible: true,
        items:[]
      },
      {
        text: '5.OOPæŠ€æœ¯',
        collapsible: true,
        items: [
          {
            text: 'å±æ€§ç‰¹æ€§ä»‹ç»',
            link: '/5/Property-attributes-an-Introduction'
          }
        ]
      },
      {
        text: '6.æ­£åˆ™è¡¨è¾¾å¼',
        collapsible: true,
        items: []
      },
      {
        text: '7.å…¶å®ƒè¯é¢˜ï¼šå…ƒç¼–ç¨‹',
        collapsible: true,
        items: []
      }
    ]
  },
  markdown: {
    // lineNumbers: true, // æ˜¯å¦æ˜¾ç¤ºè¡Œå·
    // options for markdown-it-toc-done-right
    toc: { level: [1, 2] },
  }
}
```
github actionsæ„å»ºä¹‹åæ€ä¹ˆéƒ½æ‰¾ä¸åˆ°ä¸€äº›cssèµ„æºï¼Œåé¢çœ‹åˆ°å¦‚ä¸‹æ–‡æ¡£ï¼š

- [config - base](https://vitepress.vuejs.org/config/app-configs.html#base)

æœ€åæ·»åŠ ä¸Š `base` å­—æ®µï¼Œå®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼š
```js
export default {
  // ...
  base: '/deep-javascript-cn/',
  //...
}
```
