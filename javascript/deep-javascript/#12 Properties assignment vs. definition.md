ç›®å½•ï¼š

1. [Assignment vs. definition](#1)
   1. [Assignment](#1.1)
   2. [Definition](#1.2)
2. [Assignment and definition in theory(optional)](#2)
   1. [Assigning to a property](#2.1)
   2. [Defining a property](#2.2)
3. [Definition and assignment in pratice](#3)
   1. [Only definition allows us to create a property with arbitrary attributes](#3.1)
   2. [The assignment operator does not change properties in prototypes](#3.2)
   3. [Assignment calls setters, definition doesn't](#3.3)
   4. [Inherited read-only properties prevent creating own properties via assignment](#3.4)
4. [Which language constructs use definition, which assignment?](#4)
   1. [The properties of an object literal was added via definition](#4.1)
   2. [The assignment operator = always uses assignment](#4.2)
   3. [Public class fields are added via definition](#4.3)
5. [Further reading and sources of this chapter](#5)



ğŸ“š æœ‰2ç§æ–¹å¼åˆ›å»ºæˆ–æ”¹å˜å¯¹è±¡ `obj` çš„å±æ€§ `prop`:

- *èµ‹å€¼*ï¼š `obj.prop = true`
- *å®šä¹‰*ï¼š `Object.defineProperty(obj, prop, { value: true })`

æœ¬ç« å°†è§£é‡Š2ç§æ–¹å¼çš„å·¥ä½œåŸç†ã€‚ï¼ˆå‰ç½®çŸ¥è¯†ï¼šå±æ€§ç‰¹æ€§å’Œå±æ€§æè¿°å™¨ï¼‰





<p id="1"></p>



## 1ï¸âƒ£ èµ‹å€¼ vs. å®šä¹‰



<p id="1.1"></p>



### 1.1 èµ‹å€¼ï¼ˆassignmentï¼‰

æˆ‘ä»¬ä½¿ç”¨ èµ‹å€¼æ“ä½œç¬¦ `=` ç»™å¯¹è±¡ `obj` ä¸Šçš„å±æ€§ `.prop` èµ‹ä¸€ä¸ªå€¼ `value`:

```js
obj.prop = value
```

ğŸ‘©â€ğŸ« è¿™ä¸ªæ“ä½œç¬¦å·¥ä½œæ•ˆæœçš„å·®å¼‚å–å†³äº `.prop` å±æ€§æ˜¯ä»€ä¹ˆï¼š

- **æ”¹å˜å±æ€§**ï¼šå¦‚æœå·²ç»å­˜åœ¨ä¸€ä¸ªè‡ªèº«æ•°æ®å±æ€§ `.prop`ï¼Œèµ‹å€¼ä¼šå°†å…¶å€¼æ›´æ”¹ä¸º `value`
- **è°ƒç”¨setters**ï¼šå¦‚æœå¯¹ `.prop` å­˜åœ¨ä¸€ä¸ªè‡ªèº«çš„æˆ–è€…ç»§æ‰¿çš„setterï¼ˆè®¾ç½®å™¨ï¼‰ï¼Œèµ‹å€¼ä¼šè°ƒç”¨è¯¥setter 
- **åˆ›å»ºå±æ€§**ï¼š å¦‚æœä¸å­˜åœ¨è‡ªèº«æˆ–è€…ç»§æ‰¿çš„æ•°æ®å±æ€§ `.prop` å’Œ æ²¡æœ‰è‡ªèº«çš„æˆ–è€…ç»§æ‰¿çš„ `setter`ï¼Œèµ‹å€¼ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªèº«æ•°æ®å±æ€§

å³ï¼šèµ‹å€¼çš„ä¸»è¦ç›®çš„æ˜¯åšå‡ºæ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒæ”¯æŒsettersã€‚ï¼ˆè®°ä½è¿™å¥è¯ï¼Œåé¢å†…å®¹ä¼šå›´ç»•ç€è¿™å¥è¯æ·±å…¥è¯´æ˜ï¼‰



<p id="1.2"></p>



### 1.2 å®šä¹‰ï¼ˆdefinitionï¼‰

ä¸ºäº†ç»™ `obj` å®šä¹‰ä¸€ä¸ªå±æ€§ `propKey`ï¼Œæˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹é¢æ–¹æ³•çš„æ“ä½œï¼š

```js
Object.defineProperty(obj, propKey, propDesc)
```

ğŸ‘©â€ğŸ« è¿™ä¸ªæ–¹æ³•çš„å·¥ä½œæ•ˆæœå–å†³äºå±æ€§çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆï¼š

- **æ”¹å˜å±æ€§**ï¼šå¦‚æœè‡ªèº«å­˜åœ¨ `propKey`ï¼Œå®šä¹‰æ ¹æ®å±æ€§æè¿°å™¨ `propDesc` æ”¹å˜å…¶å±æ€§ç‰¹æ€§
- **åˆ›å»ºå±æ€§**ï¼š å¦‚æœä¸å­˜åœ¨é”®ä¸º `propKey` çš„å±æ€§ï¼Œå®šä¹‰ä¼šä½¿ç”¨æŒ‡å®šçš„ `propDesc` åˆ›å»ºä¸€ä¸ªè‡ªèº«å±æ€§ï¼Œå¹¶åŒ…å«ç‰¹æ€§ã€‚

å³ï¼šå®šä¹‰çš„ä¸»è¦ç›®çš„æ˜¯åˆ›å»ºä¸€ä¸ªè‡ªèº«å±æ€§ï¼ˆ**å³ä½¿å­˜åœ¨ç»§æ‰¿çš„setterï¼Œå®ƒä¹Ÿä¼šå¿½ç•¥å®ƒ** ğŸ’¡ï¼‰ï¼Œå¹¶ä¸”æ”¹å˜å±æ€§ç‰¹æ€§ã€‚ï¼ˆè®°ä½è¿™å¥è¯ï¼Œåé¢å†…å®¹ä¼šå›´ç»•ç€è¿™å¥è¯æ·±å…¥è¯´æ˜ï¼‰



<p id="2"></p>



## 2ï¸âƒ£ â­ç†è®ºä¸Šçš„èµ‹å€¼å’Œå®šä¹‰(Assignment and definition in theory)

ğŸ‘©ğŸ»â€ğŸ« åœ¨ECMAScriptè§„èŒƒä¸­çš„å±æ€§æè¿°å™¨ï¼š

åœ¨è§„èŒƒæ“ä½œä¸­ï¼Œå±æ€§æè¿°å™¨ä¸æ˜¯JSå¯¹è±¡ï¼Œè€Œæ˜¯ [Records](https://tc39.es/ecma262/#sec-list-and-record-specification-type)ï¼ŒRecordsæ˜¯è§„èŒƒå†…éƒ¨æ•°æ®ç»“æ„ï¼Œå®ƒæ‹¥æœ‰ `fields`ã€‚*å­—æ®µçš„é”®ä½¿ç”¨åŒä¸­æ‹¬å·ã€‚* æ¯”å¦‚ï¼Œ **`Desc.[[Configurable]]`** ä¼šè®¿é—®å­—æ®µ `Desc` çš„  `.[[Configurable]]`ã€‚Recordsä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’æ—¶ï¼Œä¼šè½¬æ¢æˆJSå¯¹è±¡ï¼Œæˆ–è€…ä»JSå¯¹è±¡è½¬æ¢ä¸ºRecordsã€‚



<p id="2.1"></p>

### 2.1 ç»™ä¸€ä¸ªå±æ€§èµ‹å€¼ï¼ˆAssigning to a propertyï¼‰

ç»™ä¸€ä¸ªå±æ€§èµ‹å€¼çš„æ“ä½œå®é™…æ˜¯é€šè¿‡ECMAScriptè§„èŒƒä¸­çš„ [ä¸‹é¢æ“ä½œ](https://tc39.es/ecma262/#sec-ordinarysetwithowndescriptor) å®ç°çš„ï¼šğŸ“’

```js
OrdinarySetWithOwnDescriptor(O, P, V, Receiver, ownDesc): boolean
```

å‚æ•°å«ä¹‰ï¼š

- `O` è¡¨ç¤ºå½“å‰è®¿é—®çš„å¯¹è±¡
- `P` è¡¨ç¤ºæˆ‘ä»¬æ­£åœ¨èµ‹å€¼çš„å±æ€§çš„é”®
- `V` è¡¨ç¤ºæˆ‘ä»¬æ­£åœ¨èµ‹çš„å€¼
- `Receiver` è¡¨ç¤ºèµ‹å€¼å¼€å§‹çš„å¯¹è±¡
- `ownDesc` æ˜¯ `O[P]` çš„æè¿°å™¨ï¼Œæˆ–è€…å±æ€§ä¸å­˜åœ¨æ—¶ä¸º `null`

è¿”å›å€¼è¡¨ç¤ºæ“ä½œæ˜¯å¦æˆåŠŸã€‚**ä¸¥æ ¼æ¨¡å¼** ä¸‹ï¼Œå¦‚æœ `OrdinarySetWithOwnDescriptor()` å¤±è´¥æ—¶ï¼Œä¼šæŠ›å‡º `TypeError`ã€‚

ğŸ‘©ğŸ»â€ğŸ« ä¸‹é¢æ˜¯è¿™ä¸ªç®—æ³•çš„å¤§è‡´æ€»ç»“ï¼š

- è¯¥ç®—æ³•ä¼šéå† `Receiver` çš„åŸå‹é“¾ï¼Œç›´åˆ°å®ƒæ‰¾åˆ°é”®ä¸º `P` çš„å±æ€§ã€‚éå†é€šè¿‡é€’å½’è°ƒç”¨ `OrdinarySetWithOwnDescriptor()` å®Œæˆã€‚åœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œ`O` ä¼šå‘ç”Ÿå˜åŒ–ï¼ŒæŒ‡å‘å½“å‰è®¿é—®çš„å¯¹è±¡ï¼Œè€Œ `Receiver` æ˜¯å§‹ç»ˆä¿æŒä¸å˜çš„ã€‚ğŸ˜
- å–å†³äºéå†æ‰¾åˆ°äº†ä»€ä¹ˆï¼Œä¼šåœ¨ï¼ˆéå†å¼€å§‹çš„åœ°æ–¹ï¼‰ `Receiver` ä¸Šåˆ›å»ºè‡ªèº«å±æ€§æˆ–è€…å‘ç”Ÿå…¶å®ƒçš„äº‹æƒ…

è¿™ä¸ªç®—æ³•æ›´è¯¦ç»†çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š

- å¦‚æœ `ownDesc` æ˜¯ `undefined`ï¼Œåˆ™è¡¨ç¤ºæˆ‘ä»¬æ²¡æœ‰å‘ç°é”®ä¸º `P` çš„å±æ€§ï¼š

  - `If`: `O` æœ‰ä¸€ä¸ªåŸå‹ `parent`ï¼Œåˆ™è¿”å› `parent.[[Set]](P, V, Receiver)` ã€‚è¿™ä¼šå»¶ç»­æˆ‘ä»¬çš„æœç´¢ã€‚æ–¹æ³•çš„è°ƒç”¨é€šå¸¸ä»¥é€’å½’è°ƒç”¨ `OrdinarySetWithOwndescriptor()` ç»“æŸ

  - `Else`:ï¼ˆå³ `O` æ²¡æœ‰åŸå‹ï¼‰æˆ‘ä»¬å¯¹ `P` å±æ€§çš„æœç´¢å¤±è´¥ï¼Œç„¶åæˆ‘ä»¬æŒ‰å¦‚ä¸‹æ–¹å¼è®¾ç½® `ownDesc`:

    ```js
    {
      [[Value]]: undefined,
      [[Writable]]: true,
      [[Enumerable]]: true,
      [[Configurable]]: true
    }
    ```

    ä½¿ç”¨è¿™ä¸ª `ownDesc`ï¼Œä¸‹ä¸€ä¸ª `if` è¯­å¥ä¼šåœ¨ `Receiver` ä¸Šåˆ›å»ºä¸€ä¸ªè‡ªèº«å±æ€§

- å¦‚æœ `ownDesc` æŒ‡å®šäº†ä¸€ä¸ª**æ•°æ®å±æ€§ï¼ˆ`data property`ï¼‰**ï¼Œåˆ™è¡¨ç¤ºæˆ‘ä»¬å‘ç°ä¸€ä¸ªå±æ€§ï¼š

  - å¦‚æœ `ownDesc.[[Writable]]` æ˜¯ `false`ï¼Œè¿”å› `false`ã€‚**è¿™æ„å‘³ç€ï¼Œä»»ä½•ä¸å¯å†™å±æ€§ `P`(è‡ªèº«æˆ–ç»§æ‰¿çš„)éƒ½ä¼šé˜»æ­¢èµ‹å€¼æ“ä½œ** ğŸ’¡
  - è®© `let exstingDescriptor = Receiver.[[GetOwnProperty]](p)`ã€‚å³åœ¨èµ‹å€¼å¼€å§‹çš„åœ°æ–¹å–å›å±æ€§æè¿°å™¨ã€‚æˆ‘ä»¬ç°åœ¨å°±æœ‰äº†å¦‚ä¸‹ä¸€äº›ä¸œè¥¿ï¼š
    - å½“å‰å¯¹è±¡ `O` å’Œ å½“å‰å±æ€§æè¿°å™¨ `ownDesc` åœ¨ä¸€ä¸ªæ‰‹ä¸Š
    - åŸå§‹å¯¹è±¡ `Receiver` å’ŒåŸå§‹å±æ€§æè¿°å™¨ `existingDescriptor` åœ¨å¦ä¸€ä¸ªæ‰‹ä¸Š
  - å¦‚æœ `existingDescriptor` ä¸æ˜¯ `undefined`:
    - (å¦‚æœæˆ‘ä»¬åˆ°è¾¾è¿™é‡Œäº†ï¼Œè¡¨ç¤ºæˆ‘ä»¬ä»åœ¨åŸå‹é“¾çš„å¼€å§‹åœ°æ–¹ - æˆ‘ä»¬åªæœ‰åœ¨ `Receiver` ä¸Šä¸å­˜åœ¨å±æ€§ `P` æ—¶æ‰å¼€å§‹é€’å½’)
    - ä¸‹é¢2ä¸ª `if` æ¡ä»¶åº”å½“æ°¸è¿œä¸ä¸º `true`ï¼Œå› ä¸º `ownDesc` å’Œ `existingDescriptor` åº”å½“æ˜¯ç›¸ç­‰çš„ï¼š
      - å¦‚æœ `existingDescriptor` æŒ‡å®šä¸€ä¸ªè®¿é—®å™¨ï¼Œè¿”å› `false`
      - å¦‚æœ `existingDescriptor.[[Writable]] ` ä¸º `false`ï¼Œè¿”å› `false`
    - è¿”å› `Receiver.[[DefineOwnProperty]](P, { [[Value]]: V })`ã€‚**è¿™ä¸ªå†…éƒ¨æ–¹æ³•æ‰§è¡Œå®šä¹‰ï¼Œç”¨äºæˆ‘ä»¬æ”¹å˜å±æ€§ `Receiver[P]` çš„å€¼**ã€‚å®šä¹‰ç®—æ³•ä¼šåœ¨ä¸‹é¢å­èŠ‚ä¸­æè¿°
  - Elseï¼šï¼ˆå¦‚æœ `existingDescriptor` ä¸º `undefined`ï¼‰
    - ï¼ˆå¦‚æœæˆ‘ä»¬è¾¾åˆ°è¿™é‡Œï¼Œåˆ™è¡¨ç¤º `Receiver` ä¸å­˜åœ¨é”®ä¸º `P` çš„è‡ªèº«å±æ€§ï¼‰
    - è¿”å› `CreateDataProperty(Receiver, P, V)` ([è¿™ä¸ªæ“ä½œ](https://tc39.es/ecma262/#sec-createdataproperty) ä¼šå¯¹å…¶ç¬¬ä¸€ä¸ªå‚æ•°åˆ›å»ºè‡ªèº«å±æ€§)

- ï¼ˆå¦‚æœæˆ‘ä»¬åˆ°è¿™é‡Œï¼Œåˆ™è¡¨ç¤º `ownDesc` æè¿°ä¸€ä¸ªè‡ªèº«çš„æˆ–è€…ç»§æ‰¿çš„ **è®¿é—®å™¨å±æ€§ï¼ˆ`accessor property`ï¼‰**ï¼‰

- `let setter = ownDesc.[[Set]]`

- `if(setter == undefined) return false`

- æ‰§è¡Œ `Call(setter, Receiver, Â«vÂ»)`ã€‚[Call()](https://tc39.es/ecma262/#sec-call) ä¼šè°ƒç”¨å‡½æ•°å¯¹è±¡ `setter`ï¼Œå¹¶å°† `this` è®¾ç½®ä¸º `Receiver`ï¼Œå•ä¸€å‚æ•°ä¸º `v`(æ³•è¯­æ‹¬å· Â«Â» ç”¨äºè§„èŒƒä¸­çš„åˆ—è¡¨)

- è¿”å› `true`



> æˆ‘ä»¬å¦‚ä½•ä»ä¸€ä¸ªèµ‹å€¼åˆ° OrdinarySetWithOwnDescriptor() çš„ï¼Ÿ

ä¸ä½¿ç”¨è§£æ„è®¡ç®—èµ‹å€¼ä¼šæ¶‰åŠå¦‚ä¸‹æ­¥éª¤ï¼š

1. åœ¨è§„èŒƒä¸­ï¼Œè®¡ç®—ä½äº [AssignmentExpression è¿è¡Œæ—¶è¯­ä¹‰è¿™ä¸€èŠ‚ä¸­](https://tc39.es/ecma262/#sec-assignment-operators-runtime-semantics-evaluation)ã€‚è¿™ä¸€èŠ‚å¤„ç†ä¸ºåŒ¿åå‡½æ•°ã€è§£æ„ç­‰æä¾›åç§°çš„é—®é¢˜
2. å¦‚æœæ²¡æœ‰è§£æ„æ¨¡å¼ï¼Œåˆ™ä¼šä½¿ç”¨ [PutValue()](https://tc39.es/ecma262/#sec-putvalue) å®Œæˆèµ‹å€¼
3. å¯¹äºå±æ€§èµ‹å€¼ï¼Œ`PutValue()` è°ƒç”¨å†…éƒ¨æ–¹æ³• `.[[Set]]()`
4. å¯¹æ™®é€šå¯¹è±¡ï¼Œ[.[\[Set]\]()](https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots-set-p-v-receiver) ä¼šè°ƒç”¨ `OrdinarySet()` (å®ƒåˆä¼šè°ƒç”¨ `OrdinarySetWithOwnDescriptor()`)ï¼Œç„¶åè¿”å›ç»“æœğŸ˜‚

ğŸš¨ æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœ `.[[Set]]()` çš„ç»“æœä¸ºfalseï¼Œ `PutValue()` ä¼šæŠ›å‡º `TypeError`



<p id="2.2"></p>

### 2.2 å®šä¹‰ä¸€ä¸ªå±æ€§ï¼ˆDefining a propertyï¼‰

å®šä¹‰ä¸€ä¸ªå±æ€§çš„æ“ä½œå®é™…æ˜¯é€šè¿‡ECMAScriptè§„èŒƒä¸­çš„ [ä¸‹é¢æ“ä½œ](https://tc39.es/ecma262/#sec-validateandapplypropertydescriptor) å®ç°çš„ï¼šğŸ“’

```js
ValidateAndApplyPropertyDescriptor(O, P, extensible, Desc, current): boolean
```

å‚æ•°å«ä¹‰ï¼š

- `O` è¡¨ç¤ºæˆ‘ä»¬æƒ³å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚å½“ `O` ä¸º `undefined` æ—¶ï¼Œä¼šä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„ä»…éªŒè¯æ¨¡å¼ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå¿½ç•¥äº†è¿™ç§æ¨¡å¼ã€‚
- `P` æˆ‘ä»¬æƒ³å®šä¹‰çš„å±æ€§key
- `extensible` æŒ‡ç¤ºå¯¹è±¡ `O` æ˜¯å¦å¯æ‰©å±•
- `Desc` æ˜¯å±æ€§æè¿°å™¨ï¼Œç”¨äºæŒ‡å®šå±æ€§çš„ç‰¹æ€§
- `current` å¦‚æœè‡ªèº«å±æ€§ `O[P]` å­˜åœ¨çš„è¯ï¼Œå®ƒåŒ…å«å±æ€§æè¿°å™¨ï¼Œå¦åˆ™ `current` ä¸º `undefined`

æ“ä½œçš„ç»“æœæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ“ä½œæ˜¯å¦æˆåŠŸã€‚å¤±è´¥å¯èƒ½å¯¼è‡´ä¸åŒçš„åæœã€‚ä¸€äº›è°ƒç”¨è€…ä¼šå¿½ç•¥è¿™äº›ç»“æœï¼Œè€Œæœ‰äº›è°ƒç”¨è€…ï¼Œæ¯”å¦‚ `Object.defineProperty()` ï¼Œåœ¨ç»“æœä¸º `false` æ—¶æŠ›å‡º `TypeError`ã€‚

ä¸‹é¢æ˜¯è¿™ä¸ªç®—æ³•çš„æ€»ç»“ï¼š

- å¦‚æœ `current` æ˜¯ `undefined`ï¼Œ è¡¨ç¤ºå±æ€§ `P` ç›®å‰è¿˜ä¸å­˜åœ¨ï¼Œå¿…é¡»è¢«åˆ›å»º
  - å¦‚æœ `extensible` ä¸º `false`ï¼ˆå³å¯¹è±¡ä¸å¯æ‰©å±•ï¼‰ï¼Œè¿”å› `false`ï¼Œè¡¨ç¤ºå±æ€§ä¸èƒ½è¢«æ·»åŠ 
  - å¦åˆ™ï¼Œæ£€æŸ¥ `Desc`ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ•°æ®å±æ€§æˆ–è€…è®¿é—®å™¨å±æ€§
  - è¿”å› `true`
- å¦‚æœ `Desc` ä¸å­˜åœ¨ä»»ä½•å­—æ®µï¼Œè¿”å› `true`ï¼Œè¡¨ç¤ºè¿™ä¸ªæ“ä½œæˆåŠŸäº†ï¼ˆå› ä¸ºä¸éœ€è¦åšä»»ä½•æ”¹å˜ï¼‰
- å¦‚æœ `current.[[Configurable]]` æ˜¯ `false`ï¼ˆè¯‘è€…æ³¨ï¼šå³å¯¹è±¡ä¸å¯é…ç½®ï¼‰ï¼š
  - ï¼ˆ`Desc` ä¸å…è®¸æ”¹å˜é™¤ `value` ä¹‹å¤–çš„ä»»ä½•ç‰¹æ€§ï¼‰
  - å¦‚æœ `Desc.[[Configurable]]` å­˜åœ¨ï¼Œå®ƒå¿…é¡»å’Œ `current.[[Configurable]]` æ˜¯ä¸€æ ·çš„å€¼ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å› `false`
  - å¯¹ `Desc.[[Enumerable]]` æ‰§è¡Œç›¸åŒçš„æ£€æµ‹
- æ¥ä¸‹æ¥ï¼šæˆ‘ä»¬ *éªŒè¯* å±æ€§æè¿°å™¨ `Desc`, `current` æ‰€æè¿°çš„ç‰¹æ€§å€¼æ˜¯å¦å¯æ›´æ”¹ä¸º `Desc` æŒ‡å®šçš„å€¼ï¼Ÿå¦‚æœä¸èƒ½ï¼Œåˆ™è¿”å› `false`;å¦‚æœå¯ä»¥ï¼Œåˆ™ç»§ç»­ï¼š
  - `If` æè¿°å™¨æ˜¯ *é€šç”¨çš„*ï¼ˆå³æ²¡æœ‰æŒ‡å®šä¸ºæ•°æ®å±æ€§è¿˜æ˜¯è®¿é—®å™¨å±æ€§ï¼Œè¯‘è€…æ³¨ï¼šå³åªæŒ‡å®šäº† `configurable | enumerable`ï¼‰ï¼Œåˆ™éªŒè¯é€šè¿‡ï¼Œæˆ‘ä»¬ç»§ç»­
  - `Else if` ä¸€ä¸ªæè¿°å™¨æŒ‡å®šäº†æ•°æ®å±æ€§ï¼Œè€Œå¦ä¸€ä¸ªæŒ‡å®šä¸ºäº†è®¿é—®å™¨å±æ€§ï¼š
    - å½“å‰å±æ€§å¿…é¡»æ˜¯å¯ä»¥é…ç½®çš„ï¼ˆå¦è€…å®ƒçš„ç‰¹æ€§æ— æ³•æ ¹æ®éœ€è¦è¿›è¡Œæ›´æ”¹ï¼‰ã€‚å¦‚æœä¸å¯é…ç½®ï¼Œåˆ™è¿”å› `false`
    - å°†å½“å‰å±æ€§ä»æ•°æ®å±æ€§æ›´æ”¹ä¸ºè®¿é—®å™¨å±æ€§ï¼Œåä¹‹äº¦ç„¶ã€‚å½“è¿™æ ·åšæ—¶ï¼Œ`.[[Configurable]]` å’Œ `.[[Enumerable]]` çš„å€¼ä¼šä¿å­˜ä¸‹æ¥ï¼Œå…¶å®ƒç‰¹æ€§å¾—åˆ° [é»˜è®¤å€¼](https://exploringjs.com/deep-js/ch_property-attributes-intro.html#property-attributes)ï¼ˆå¯¹è±¡å€¼ç‰¹æ€§ä¸º `undefined`ï¼Œå¸ƒå°”å€¼ç‰¹æ€§ä¸º `false`ï¼‰
  - `Else if` 2ä¸ªæè¿°å™¨éƒ½ä¸ºæ•°æ®å±æ€§ï¼š
    - å¦‚æœ `current.[[Configurable]]` å’Œ `current.[[Writable]]` éƒ½æ˜¯ `false`ï¼Œåˆ™ä¸å…è®¸ä»»ä½•æ”¹å˜å‘ç”Ÿï¼Œ`Desc` å’Œ `current` å¿…é¡»æŒ‡å®šç›¸åŒçš„ç‰¹æ€§ï¼š
      - ï¼ˆå› ä¸º `current.[[Configurable]]` ä¸º `false`, `Desc.[[Configurable]]` å’Œ `Desc.[[Enumerable]]` åœ¨å…ˆå‰å·²ç»è¢«æ£€éªŒï¼Œå¹¶ä¸”å·²ç»ä¸ºæ­£ç¡®å€¼ï¼‰
      - å¦‚æœ `Desc.[[Writable]]` å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯ `true`ï¼Œåˆ™è¿”å› `true`
      - å¦‚æœ `Desc.[[Value]]` å­˜åœ¨ï¼Œå¹¶ä¸”å’Œ `current.[[Value]]` å€¼ä¸ç›¸åŒï¼Œåˆ™è¿”å› `false`
      - æ²¡æœ‰å…¶ä»–è¦åšçš„äº†ï¼Œè¿”å› `true` è¡¨ç¤ºç®—æ³•æˆåŠŸ
      - (*æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¯¹ä¸å¯é…ç½®å±æ€§ï¼Œæˆ‘ä»¬åªèƒ½æ”¹å˜å…¶valueï¼Œè€Œä¸èƒ½æ›´æ”¹å…¶å®ƒç‰¹æ€§ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªä¾‹å¤–è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯å†™ç‰¹æ€§æ›´æ”¹ä¸ºä¸å¯å†™ã€‚è¿™ä¸ªç®—æ³•ä¼šæ­£ç¡®çš„å¤„ç†è¿™ä¸ªä¾‹å¤–æƒ…å†µ*)ğŸ˜…
  - `Else` ï¼ˆ2ä¸ªæè¿°å™¨éƒ½æ˜¯è®¿é—®å™¨å±æ€§ï¼šï¼‰
    - å¦‚æœ `current.[[Configurable]]` æ˜¯ `false`ï¼Œåˆ™ä¸å…è®¸ä»»ä½•æ”¹å˜ã€‚å¹¶ä¸” `Desc` å’Œ `current` å¿…é¡»æŒ‡å®šç›¸åŒç‰¹æ€§ï¼š
      - ï¼ˆç”±äº `current.[[Configurable]]` å·²ç»ä¸º `false`ï¼Œ`Desc.[[Configurable]]` å’Œ `Desc.[[Enumerable]]` åœ¨ä¹‹å‰å·²ç»æ ¡éªŒï¼Œå¹¶ä¸”æ‹¥æœ‰æ­£ç¡®çš„å€¼ï¼‰ 
      - å¦‚æœ `Desc.[[Set]]` å­˜åœ¨ï¼Œå®ƒå¿…é¡»å’Œ `current.[[Set]]` çš„å€¼ä¸€æ ·ï¼Œå¦åˆ™è¿”å› `false`
      - `Desc.[[Get]]` æ‰§è¡Œç›¸åŒçš„æ ¡éªŒ
      - æ²¡æœ‰æ›´å¤šè¦åšçš„äº†ã€‚è¿”å› `true` è¡¨ç¤ºç®—æ³•æˆåŠŸã€‚
- è®¾ç½®å±æ€§ `P` çš„ç‰¹æ€§ä¸º `Desc` æŒ‡å®šçš„å€¼ã€‚é€šè¿‡éªŒè¯ï¼Œæˆ‘ä»¬èƒ½ç¡®ä¿æ‰€æœ‰çš„æ”¹å˜æ˜¯å…è®¸çš„
- è¿”å› `true`





<p id="3"></p>



## 3ï¸âƒ£ å®šä¹‰å’Œèµ‹å€¼å®è·µï¼ˆDefinition and assignment in practiceï¼‰

æœ¬èŠ‚æè¿°å±æ€§å®šä¹‰å’Œèµ‹å€¼å·¥ä½œçš„ä¸€äº›ç»“æœã€‚



<p id="3.1"></p>



### 3.1 åªæœ‰å®šä¹‰å…è®¸ä½¿ç”¨ä»»ä½•ç‰¹æ€§åˆ›å»ºå±æ€§

å¦‚æœæˆ‘ä»¬é€šè¿‡**èµ‹å€¼**çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªè‡ªèº«å±æ€§ï¼Œå®ƒæ€»æ˜¯å°† `writable` & `enumerable` & `configurable` ç‰¹æ€§è®¾ç½®ä¸º `true`:

```js {7-9}
const obj = {}
obj.dataProp = 'abc'
assert.deepEqual(
  Object.getOwnPropertyDescriptor(obj, 'dataProp'),
  {
    value: 'abc',
    writable: true,
    enumerable: true,
    configurable: true
  }
)
```

**å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æŒ‡å®šä»»æ„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ å®šä¹‰ çš„æ–¹å¼**ã€‚

å¹¶ä¸”ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹è±¡å­—é¢é‡ä¸­åˆ›å»º `getters` & `setters`ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ä¹‹åé€šè¿‡èµ‹å€¼çš„æ–¹å¼æ·»åŠ è®¿é—®å™¨å±æ€§ï¼Œ**æ˜¯çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å®šä¹‰ğŸ˜**ã€‚



<p id="3.2"></p>



### 3.2 èµ‹å€¼æ“ä½œç¬¦ä¸ä¼šæ”¹å˜åŸå‹ä¸­çš„å±æ€§

è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢ç¤ºä¾‹ï¼Œ`obj` ä» `proto` ç»§æ‰¿äº† `prop` å±æ€§:

```js
const proto = { prop: 'a' }
const obj = Object.create(prop)
```

æˆ‘ä»¬ä¸èƒ½é€šè¿‡ç»™ `obj.prop` èµ‹å€¼çš„æ–¹å¼ï¼ˆç ´åæ€§çš„ï¼‰æ”¹å˜ `proto.prop`ã€‚è¿™æ ·åšåªä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªèº«å±æ€§ï¼š

```js
assert.deepEqual(
  Object.keys(obj),
  []
)

// èµ‹å€¼
obj.prop = 'b'

// èµ‹å€¼ç”Ÿæ•ˆ
assert.equal(obj.prop, 'b')

// ä½†æ˜¯æˆ‘ä»¬åˆ›å»ºçš„æ˜¯è‡ªèº«çš„å±æ€§ï¼Œå°è¯•è¦†å†™ proto.prop
// å¹¶æ²¡æœ‰æ”¹å˜åŸå‹ä¸Šçš„å±æ€§
assert.deepEqual(
  Object.keys(obj),
  ['prop']
)
assert.equal(proto.prop, 'a')
```

è¿™ç§è¡Œä¸ºçš„ç†ç”±å¦‚ä¸‹ï¼š

åŸå‹æ‹¥æœ‰è‡ªå·±çš„å±æ€§ï¼Œå®ƒçš„å€¼è¢«æ‰€æœ‰åä»£å…±äº«ã€‚å¦‚æœæˆ‘ä»¬åªæƒ³æ”¹å˜å®ƒçš„ä¸€ä¸ªåä»£ä¸­çš„è¯¥å±æ€§ï¼Œæˆ‘ä»¬å¿…é¡»éç ´åæ€§çš„ï¼Œé€šè¿‡è¦†ç›–çš„å½¢å¼å®Œæˆï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“åˆ°å…¶å®ƒåä»£ã€‚



<p id="3.3"></p>



### 3.3 â­èµ‹å€¼ä¼šè°ƒç”¨settersï¼Œè€Œå®šä¹‰ä¸ä¼š

å®šä¹‰ `obj` çš„å±æ€§ `prop` å’Œç»™å®ƒèµ‹å€¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

ğŸ‘©ğŸ»â€ğŸ« å¦‚æœæˆ‘ä»¬ä½¿ç”¨**å®šä¹‰**ï¼Œåˆ™æˆ‘ä»¬çš„æ„å›¾è¦ä¹ˆæ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªè‡ªèº«çš„ï¼ˆéç»§æ‰¿çš„ï¼‰å±æ€§ï¼Œè¦ä¹ˆæ˜¯ä¸ºäº†æ”¹å˜ä¸€ä¸ªè‡ªèº«çš„å±æ€§ã€‚å› æ­¤ï¼Œ**ä¸‹ä¾‹ä¸­å®šä¹‰ä¼šå¿½ç•¥ `.prop` ç»§æ‰¿çš„setter**:

ğŸŒ°

```js
let setterWasCalled = false
const proto = {
  get prop() {
    return 'protoGetter'
  },
  set prop(x) {
    // ğŸš¨ æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰è¿›è¡Œèµ‹å€¼æ“ä½œ this.prop = x
    setterWasCalled = true
  }
}
// obj çš„åŸå‹æ˜¯ proto
const obj = Object.create(proto)

// åŸå‹ä¸Šçš„å±æ€§
assert.equal(obj.prop, 'propGetter')

// å®šä¹‰ obj.prop æ·»åŠ åˆ°å¯¹è±¡è‡ªèº«
Object.defineProperty(
  obj,
  'prop',
  {
    value: 'objData'
  }
)
// ğŸ’¡ å¯ä»¥çœ‹å‡º åŸå‹ä¸­çš„ setterå¹¶æ²¡æœ‰è¢«è§¦å‘
assert.equal(setterWasCalled, false)

// åˆ›å»ºäº†çš„è‡ªèº«å±æ€§ï¼Œæ©ç›–äº†åŸå‹ä¸Šçš„åŒåå±æ€§
assert.equal(obj.prop, 'objData')
```

è€Œï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ **èµ‹å€¼**ï¼Œåˆ™æˆ‘ä»¬çš„æ„å›¾ä¸€èˆ¬æ˜¯æ”¹å˜**å·²ç»å­˜åœ¨çš„ä¸œè¥¿**ï¼Œå¹¶ä¸” **è¯¥æ”¹å˜ä¼šé€šè¿‡ setter å¤„ç†** ğŸ¤”

```js
let setterWasCalled = false
const proto = {
  get prop() {
    return 'protoGetter'
  },
  set prop(x) {
    // ğŸš¨ æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰è¿›è¡Œèµ‹å€¼æ“ä½œ this.prop = x
    setterWasCalled = true
  }
}
// obj çš„åŸå‹æ˜¯ proto
const obj = Object.create(proto)

assert.equal(obj.prop, 'propGetter')

// ç»™ obj.prop èµ‹å€¼
obj.prop = 'objData'
// ğŸ“š èµ‹å€¼ä¼šè§¦å‘åŸå‹ä¸Šçš„ setter
assert.equal(setterWasCalled, false)

// ğŸ“š getterä»æ˜¯æ¿€æ´»çš„
// å› ä¸ºä¸Šé¢çš„ setter ä¸­å¹¶æ²¡æœ‰è¿›è¡Œèµ‹å€¼
// æ‰€ä»¥è¿™é‡Œçš„ obj.prop ä»æ—§æ˜¯ 'propGetter'
assert.equal(obj.prop, 'protoGetter')
```



<p id="3.3"></p>



### 3.4 ç»§æ‰¿çš„åªè¯»å±æ€§é˜»æ­¢é€šè¿‡èµ‹å€¼åˆ›å»ºè‡ªå·±çš„å±æ€§

å‡å¦‚åŸå‹çš„å±æ€§ `.prop` æ˜¯åªè¯»çš„ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ

```js
const proto = Object.defineProperty(
  {},
  'prop',
  {
    value: 'protoValue',
    writable: false
  }
)
```

ğŸ‘©ğŸ»â€ğŸ« **ä»»ä½•ä» `proto` ç»§æ‰¿åªè¯»å±æ€§ `.prop` çš„å¯¹è±¡ï¼Œéƒ½ä¸èƒ½é€šè¿‡èµ‹å€¼çš„æ–¹å¼åˆ›å»ºè‡ªèº«åŒåå±æ€§**

ğŸŒ°ï¼š

```js
'use strict';

const obj = Object.create(proto)
assert.throw(
  // å°è¯•åœ¨å¯¹è±¡ä¸Šä½¿ç”¨èµ‹å€¼çš„æ–¹å¼ åˆ›å»ºåŒåå±æ€§
  () => obj.prop = 'objValue',
  /^TypeError: Cannot assign to read only property 'prop'/
)
```

ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½èµ‹å€¼å‘¢ï¼Ÿç†ç”±æ˜¯ï¼Œé€šè¿‡åˆ›å»ºè‡ªèº«å±æ€§çš„æ–¹å¼è¦†ç›–ç»§æ‰¿çš„å±æ€§ï¼Œè¢«è§†ä½œæ˜¯ [éç ´åæ€§æ”¹å˜](https://exploringjs.com/deep-js/ch_updating-destructively-and-nondestructively.html) ç»§æ‰¿çš„å±æ€§ã€‚**æŒ‰ç†è¯´ï¼Œå¦‚æœä¸€ä¸ªå±æ€§æ˜¯ä¸å¯å†™çš„ï¼Œæˆ‘ä»¬ä¸èƒ½å»è¦†ç›–å®ƒ**ã€‚

ğŸ¤£ ç„¶è€Œï¼Œ**å®šä¹‰** `.prop` ä»å¯æ­£å¸¸å·¥ä½œï¼Œè®©æˆ‘ä»¬è¦†ç›–å®ƒï¼š

```js
Object.defineProperty(
  obj,
  'prop',
  {
    value: 'objValue'
  }
)

assert.equal(obj.prop, 'objValue')
```

*æ²¡æœ‰ `setter` çš„è®¿é—®å™¨å±æ€§ï¼Œä¹Ÿå¯è¢«è®¤ä½œæ˜¯åªè¯»å±æ€§*ï¼š

```js
'use strict';

const proto = {
  get prop() {
    return 'protoValue'
  }
}
const obj = Object.create(proto)

assert.throw(
  // å°è¯•åœ¨å¯¹è±¡ä¸Šä½¿ç”¨èµ‹å€¼çš„æ–¹å¼ åˆ›å»ºåŒåå±æ€§
  () => obj.prop = 'objValue',
  /^Uncaught TypeError: Cannot set property x of #<Object> which has only a getter'/
)
```

ğŸ’¡ *override mistake*: ä¼˜ç‚¹å’Œç¼ºç‚¹

äº‹å®ä¸Šï¼ŒåŸå‹é“¾ä¸Šåªè¯»å±æ€§é˜»æ­¢èµ‹å€¼ï¼Œä¹‹å‰ç§°ä¹‹ä¸º *override mistake*:

- å®ƒåœ¨ECMAScript5.1 ä¸­è¢«å¼•å…¥

- ä¸€æ–¹é¢ï¼Œè¿™ç§è¡Œä¸ºå’ŒåŸå‹é“¾ç»§æ‰¿ä»¥åŠsetterså·¥ä½œåŸç†ä¿æŒä¸€è‡´æ€§ï¼ˆæ‰€ä»¥ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ğŸ˜…ï¼‰

- å¦ä¸€æ–¹é¢ï¼Œè¿™ç§è¡Œä¸ºï¼Œåœ¨æ·±åº¦å†»ç»“å…¨å±€å¯¹è±¡æ—¶ï¼Œä¼šå¼•å‘ä¸æƒ³è¦çš„å‰¯ä½œç”¨

- æ›¾å°è¯•æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œä½†ä¼šç ´åLodashè¿™ä¸ªåº“ï¼Œå› æ­¤è¢«æ”¾å¼ƒäº† [PR On GitHub](https://github.com/tc39/ecma262/pull/1320#issuecomment-443485524)

- èƒŒæ™¯çŸ¥è¯†

  - [PR On GitHub](https://github.com/tc39/ecma262/pull/1307)
  - [Wiki page onn ECMAScript](http://wiki.ecmascript.org/doku.php?id=strawman:fixing_override_mistake)

  

<p id="4"></p>



## 4ï¸âƒ£ å“ªäº›è¯­è¨€æ„é€ ä½¿ç”¨å®šä¹‰ï¼Œå“ªäº›ä½¿ç”¨èµ‹å€¼ï¼Ÿ

è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬çœ‹çœ‹è¯­è¨€æ„é€ ä¸­å“ªäº›æ˜¯ä½¿ç”¨å®šä¹‰ï¼Œå“ªäº›åˆæ˜¯ä½¿ç”¨èµ‹å€¼çš„ã€‚**æˆ‘ä»¬é€šè¿‡è·Ÿè¸ªæ˜¯å¦è°ƒç”¨äº†ç»§æ‰¿çš„setteræ¥æ£€æµ‹ä½¿ç”¨äº†å“ªä¸ªæ“ä½œã€‚** å¯ä»¥æŸ¥çœ‹ä¸Šé¢ `3.3` è¿™ä¸€å°èŠ‚ã€‚



<p id="4.1"></p>



### 4.1 å¯¹è±¡å­—é¢é‡çš„å±æ€§æ˜¯é€šè¿‡å®šä¹‰æ·»åŠ çš„

ğŸ‘©ğŸ»â€ğŸ« å½“æˆ‘ä»¬åˆ›å»ºå±æ€§é€šè¿‡ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼ŒJSæ€»æ˜¯ä½¿ç”¨å®šä¹‰ï¼ˆå› æ­¤ï¼Œæ°¸è¿œä¸ä¼šè°ƒç”¨ç»§æ‰¿çš„settersï¼‰ï¼š

```js
let lastSetterArgument
const proto = {
  set prop(x) {
    lastSetterArgument = x
  }
}

const obj = {
  __proto__: proto, // å­—é¢é‡çš„æ–¹å¼æ·»åŠ åŸå‹
  // é€šè¿‡å®šä¹‰çš„æ–¹å¼æ·»åŠ 
  // å¹¶ä¸ä¼šè§¦å‘åŸå‹ä¸Šçš„ setter
  prop: 'abc'
}

assert.equal(lastSetterArgument, undefined)
```



<p id="4.2"></p>



### 4.2 èµ‹å€¼æ“ä½œç¬¦ = æ€»æ˜¯ä½¿ç”¨èµ‹å€¼

èµ‹å€¼æ“ä½œç¬¦ `=` æ€»æ˜¯ä½¿ç”¨èµ‹å€¼æ–¹å¼åˆ›å»ºæˆ–è€…æ”¹å˜å±æ€§

```js
let lastSetterArgument
const proto = {
  set prop(x) {
    lastSetterArgument = x
  }
}

const obj = Object.create(proto) 

// æ­£å¸¸èµ‹å€¼
obj.prop = 'abc'
// ğŸ’¡ å¯ä»¥çœ‹å‡ºä¼šèµ‹å€¼è°ƒç”¨åŸå‹setter
assert.equal(lastSetterArgument, 'abc')

// é€šè¿‡è§£æ„æ–¹å¼èµ‹å€¼ï¼š
[obj.prop] = ['def']
assert.equal(lastSetterArgument, 'def')
```



<p id="4.3"></p>



### 4.3 â­ å…¬æœ‰ç±»å­—æ®µé€šè¿‡èµ‹å€¼çš„æ–¹å¼æ·»åŠ 



ğŸ‘©ğŸ»â€ğŸ« å³ä½¿ç±»ä¸­å…¬æœ‰å­—æ®µå’Œèµ‹å€¼è¯­æ³•ä¸€æ ·ï¼Œä½†æ˜¯ **å®ƒä»¬æ²¡æœ‰ä½¿ç”¨èµ‹å€¼çš„æ–¹å¼åˆ›å»ºå±æ€§ï¼Œè€Œæ˜¯ä½¿ç”¨å®šä¹‰çš„æ–¹å¼**ï¼ˆç±»ä¼¼å¯¹è±¡å­—é¢é‡ä¸­çš„å±æ€§ï¼‰

```js
let lastSetterArgument1
let lastSetterArgument2

class A {
  set prop1(x) {
    console.log('A prop1 set')
    lastSetterArgument1 = x
  }
  
  set prop2(x) {
    console.log('A prop2 set')
    lastSetterArgument2 = x
  }
}

class B extends A {
  // å’Œçˆ¶ç±»è®¾ç½®å™¨ä¸­åŒåå±æ€§
  prop1 = 'one'
  
  constructor() {
    super()
    this.prop2 = 'two'
  }
}

new B()

// ğŸ“š å…¬æœ‰å­—æ®µä½¿ç”¨ `å®šä¹‰`
// å› æ­¤ä¸ä¼šè§¦å‘åŸå‹ä¸Šçš„åŒåsetter
assert.equal(lastSetterArgument1, 'undefined')

// åœ¨æ„é€ å™¨ä¸­ï¼Œè§¦å‘ `èµ‹å€¼`
assert.equal(lastSetterArgument2, 'two')
```



<p id="5"></p>



## 5ï¸âƒ£ è¿›ä¸€æ­¥é˜…è¯»å’Œæœ¬ç« æºç 

- [Property chains - JS for impatient programmers](https://exploringjs.com/impatient-js/ch_proto-chains-classes.html#prototype-chains)
- [es-discuss mailing list](https://mail.mozilla.org/pipermail/es-discuss/2012-July/024227.html) å½“ESåªæ‹¥æœ‰æ•°æ®å±æ€§ï¼Œå¹¶ä¸”ESä»£ç æ— æ³•æ“ä½œå±æ€§ç‰¹æ€§æ—¶ï¼Œèµ‹å€¼å’Œå®šä¹‰ä¹‹é—´çš„åŒºåˆ«å°±ä¸æ˜¯å¾ˆé‡è¦äº†

å°ç»“ï¼ˆè¯‘è€…æ³¨ï¼‰ï¼š

1. èµ‹å€¼çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ åšå‡ºæ”¹å˜ï¼Œæ”¯æŒsettersï¼ˆå’Œç»§æ‰¿å¯†åˆ‡ç›¸å…³ï¼‰
2. å®šä¹‰çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ åˆ›å»ºä¸€ä¸ªè‡ªèº«çš„å±æ€§ï¼Œå¿½ç•¥ç»§æ‰¿çš„setters
3. ç†è®ºä¸Šï¼Œèµ‹å€¼å’Œå®šä¹‰åœ¨ECMAScriptè§„èŒƒä¸­çš„ç®—æ³•å®ç°è¿‡ç¨‹
4. å®šä¹‰å¯ä»¥æ·»åŠ ä»»ä½•å±æ€§ç‰¹æ€§
5. èµ‹å€¼ä¸ä¼šæ”¹å˜åŸå‹é“¾ä¸Šçš„åŒåå±æ€§
6. èµ‹å€¼ä¼šè°ƒç”¨åŸå‹ä¸Šçš„åŒå setterï¼Œè€Œå®šä¹‰ä¸ä¼šï¼ˆğŸš€ï¼‰
7. ç»§æ‰¿åªè¯»å±æ€§ï¼Œèµ‹å€¼å’Œçˆ¶ç±»åŒåçš„å±æ€§ï¼Œä¼šæŠ›å‡ºé”™è¯¯ï¼›è€Œå®šä¹‰ä¸ä¼š
8. å¯¹è±¡å­—é¢é‡å±æ€§æ˜¯é€šè¿‡å®šä¹‰å½¢å¼åˆ›å»ºçš„ï¼ˆğŸš€ï¼‰
9. `=` æ“ä½œç¬¦æ€»æ˜¯æ‰§è¡Œèµ‹å€¼æ“ä½œ
10. ç±»çš„å…¬æœ‰å­—æ®µé€šè¿‡å®šä¹‰åˆ›å»ºï¼›è€Œç±»æ„é€ å™¨ä¸­çš„å±æ€§é€šè¿‡èµ‹å€¼åˆ›å»ºï¼ˆğŸš€ï¼‰

2022å¹´07æœˆ19æ—¥23:36:28
