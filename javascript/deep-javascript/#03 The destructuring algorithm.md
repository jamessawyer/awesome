ç›®å½•ï¼š

1. [Preparing the pattern matching algorithm](#1)
   1. [Using declarative rules for specifying the matching algorithm](#1.1)
   2. [Evaluating expressions based on the declarative rules](#1.2)
2. [The pattern matching algorithm](#2)
   1. [Patterns](#2.1)
   2. [Rules for variable](#2.2)
   3. [Rules for object patterns](#2.3)
   4. [Rules for Array patterns](#2.4)
3. [Empty object patterns and Array patterns](#3)
4. [Applying the algorithm](#4)
   1. [Background: passing parameters via matching](#4.1)
   2. [Using move2()](#4.2)
   3. [Using move1()](#4.3)
   4. [Conclusion: Default values are a feature of pattern parts](#4.4)



æœ¬ç« ï¼Œæˆ‘ä»¬å°†ä»ä¸åŒè§’åº¦çœ‹è§£æ„ï¼šä½œä¸ºé€’å½’åŒ¹é…ç®—æ³•ã€‚

*è¿™ä¸ªç®—æ³•æ˜¯æˆ‘ä»¬æ›´å¥½çš„ç†è§£é»˜è®¤å€¼ã€‚* è¿™å°†åœ¨æœ€åæœ‰ç”¨ï¼Œæˆ‘ä»¬å°†è¯•å›¾æ‰¾å‡ºä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°çš„ä¸åŒä¹‹å¤„:

```js
function move({x = 0, y = 0} = {}) { }
function move({x, y} = { x: 0, y: 0}) {}
```



<p id="1"></p>



## 1ï¸âƒ£ ä¸ºæ¨¡å¼åŒ¹é…ç®—æ³•åšå‡†å¤‡

ğŸ“š è§£æ„èµ‹å€¼çœ‹èµ·æ¥å¦‚ä¸‹ï¼š

```
Â«patternÂ» = Â«valueÂ»
```

*æˆ‘ä»¬æƒ³ä½¿ç”¨ `pattern` ä» `value` ä¸­æå–æ•°æ®*ã€‚

ğŸ‘©ğŸ»â€ğŸ« æˆ‘ä»¬å°†çœ‹ä¸€ç§æ‰§è¡Œè¿™ç§èµ‹å€¼çš„ç®—æ³•ã€‚ è¿™ä¸ªç®—æ³•åœ¨å‡½æ•°å¼ç¼–ç¨‹æˆç§°ä¹‹ä¸º *æ¨¡å¼åŒ¹é…ï¼ˆ`pattern matching` ç®€ç§°ä¸ºï¼šåŒ¹é…ï¼‰* ğŸ˜ã€‚å®ƒæŒ‡å®šæ“ä½œç¬¦ `â†` (" match against ")ï¼Œè¯¥æ“ä½œç¬¦å°† *æ¨¡å¼* ä¸ *å€¼* åŒ¹é…ï¼Œå¹¶åœ¨è¿™æ ·åšæ—¶èµ‹å€¼ç»™å˜é‡:

```
Â«patternÂ» â† Â«valueÂ»
```

æˆ‘ä»¬è¿™é‡Œåªæ¢ç´¢è§£æ„èµ‹å€¼ï¼Œä½†æ˜¯è§£æ„å˜é‡å£°æ˜ï¼ˆ`destructuring variable declarations`ï¼‰å’Œ è§£æ„å‚æ•°å®šä¹‰ï¼ˆ`destructuring parameter definitions`ï¼‰ å·¥ä½œåŸç†ç±»ä¼¼ã€‚æˆ‘ä»¬ä¹Ÿä¸ä¼šæ·±å…¥ä¸€äº›é«˜çº§åŠŸèƒ½ï¼šè®¡ç®—å±æ€§keysï¼Œå±æ€§å€¼ç®€å†™ï¼Œä»¥åŠå¯¹è±¡å±æ€§å’Œæ•°ç»„å…ƒç´ ä½œä¸ºèµ‹å€¼çš„ç›®æ ‡ï¼Œè¿™äº›éƒ½è¶…å‡ºäº†æœ¬ç« çš„èŒƒå›´ã€‚

åŒ¹é…æ“ä½œç¬¦çš„è§„èŒƒç”±å£°æ˜æ€§è§„åˆ™ç»„æˆï¼Œè¿™äº›è§„åˆ™æ·±å…¥åˆ°ä¸¤ä¸ªæ“ä½œæ•°çš„ç»“æ„ä¸­ã€‚å£°æ˜ç¬¦å·å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´é€‚åº”ï¼Œä½†æ˜¯å®ƒä½¿å¾—è§„èŒƒæ›´åŠ çš„ç®€æ´ã€‚



<p id="1.1"></p>



### 1.1 ä½¿ç”¨å£°æ˜å¼è§„åˆ™æŒ‡å®šåŒ¹é…ç®—æ³•

æœ¬ç« ä¸­ä½¿ç”¨çš„å£°æ˜å¼è§„åˆ™å¯¹è¾“å…¥è¿›è¡Œæ“ä½œï¼Œå¹¶é€šè¿‡å‰¯ä½œç”¨ï¼ˆ`side effects`ï¼‰çš„å½¢å¼äº§ç”Ÿç®—æ³•çš„ç»“æœã€‚ä¸‹é¢å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªè§„åˆ™ğŸ“šï¼š

```
// è§„åˆ™ (2c)
{key: Â«patternÂ», Â«propertiesÂ»} â† obj // head

Â«patternÂ» â† obj.key                  // body
{Â«propertiesÂ»} â† obj
```

è¿™ä¸ªè§„åˆ™åŒ…å«ä¸‹é¢éƒ¨åˆ†ï¼š

1. `(2c)` æ˜¯è§„åˆ™çš„ç¼–å·ï¼ˆnumberï¼‰ï¼Œè¿™ä¸ªç¼–å·ç”¨äºè¡¨ç¤ºè¯¥è§„åˆ™
2. å¤´ï¼ˆ`head` ç¬¬ä¸€è¡Œï¼‰ æè¿°ï¼Œè¾“å…¥å¿…é¡»æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œæ‰èƒ½åº”ç”¨è¿™ä¸ªè§„åˆ™
3. ä¸»ä½“ï¼ˆ`body` åé¢2è¡Œï¼‰æè¿°åº”ç”¨è§„åˆ™åä¼šå‘ç”Ÿä»€ä¹ˆ



åœ¨è§„åˆ™ `(2c)` ä¸­ï¼Œheadæ„å‘³ç€å¦‚æœå­˜åœ¨å…·æœ‰è‡³å°‘ä¸€ä¸ªå±æ€§ï¼ˆå…¶é”®æ˜¯ `key`ï¼‰å’Œé›¶ä¸ªæˆ–å¤šä¸ªå‰©ä½™å±æ€§çš„å¯¹è±¡æ¨¡å¼ï¼Œåˆ™å¯ä»¥åº”ç”¨æ­¤è§„åˆ™ã€‚*è¿™ä¸ªè§„åˆ™çš„æ•ˆæœæ˜¯ç»§ç»­æ‰§è¡Œä¸ `obj.key` åŒ¹é…çš„å±æ€§å€¼æ¨¡å¼å’Œå…¶ä»–å±æ€§å’Œ `obj` ç›¸åŒ¹é…ã€‚*



è®©æˆ‘ä»¬è€ƒè™‘æœ¬ç« å¦ä¸€ä¸ªè§„åˆ™ï¼š

```
// è§„åˆ™ (2e)
{} â† obj(no properties left)  // head

// æˆ‘ä»¬å·²ç»å®Œæˆäº†               // body
```

åœ¨è§„åˆ™ `(2e)` ä¸­ï¼Œ headè¡¨ç¤ºï¼Œå¦‚æœç©ºå¯¹è±¡æ¨¡å¼ `{}` ä¸å€¼objåŒ¹é…ï¼Œåˆ™æ‰§è¡Œæ­¤è§„åˆ™ã€‚è€Œbodyåˆ™è¡¨ç¤ºï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ã€‚

ğŸš€ **è§„åˆ™`(2c)`å’Œè§„åˆ™`(2e)`å…±åŒå½¢æˆä¸€ä¸ªå£°æ˜æ€§å¾ªç¯ï¼Œåœ¨ç®­å¤´å·¦ä¾§çš„æ¨¡å¼å±æ€§ä¸Šè¿­ä»£ã€‚**



<p id="1.2"></p>



### 1.2 åŸºäºå£°æ˜å¼è§„åˆ™è®¡ç®—è¡¨è¾¾å¼

*å®Œæˆç®—æ³•æ˜¯é€šè¿‡ä¸€ç³»åˆ—å£°æ˜å¼è§„åˆ™æŒ‡å®šçš„ã€‚ğŸ˜* å‡è®¾æˆ‘ä»¬æƒ³è®¡ç®—ä¸‹é¢åŒ¹é…è¡¨è¾¾å¼ï¼š

```
{first: f, last: l} â† obj
```

ä¸ºäº†åº”ç”¨ä¸€ç³»åˆ—è§„åˆ™ï¼Œæˆ‘ä»¬ä»ä¸Šåˆ°ä¸‹æ£€æŸ¥ä»–ä»¬ï¼Œç„¶åæ‰§è¡Œç¬¬ä¸€ä¸ªå¯åº”ç”¨çš„è§„åˆ™ã€‚å¦‚æœè¯¥è§„åˆ™bodyä¸­å­˜åœ¨åŒ¹é…è¡¨è¾¾å¼ï¼Œåˆ™è¯¥è§„åˆ™å†æ¬¡è¢«åº”ç”¨ï¼Œä¾æ­¤ç±»æ¨ã€‚

*ğŸ“š æœ‰æ—¶headä¼šåŒ…å«ä¸€ä¸ªæ¡ä»¶æ¥å†³å®šè§„åˆ™æ˜¯å¦å¯è¢«åº”ç”¨*ï¼Œ æ¯”å¦‚ï¼š

```
// è§„åˆ™ (3a)
[Â«elementsÂ»] â† non_iterable    // head
if (!isIterable(non_iterable)) // headä¸­çš„æ¡ä»¶

	throw new TypeError();         // body
```



<p id="2"></p>



## 2ï¸âƒ£ â­æ¨¡å¼åŒ¹é…ç®—æ³•



<p id="2.1"></p>



### 2.1 æ¨¡å¼

ğŸš€ğŸš€ ä¸€ä¸ªæ¨¡å¼æ˜¯ä¸‹é¢ä¸­çš„æŸä¸€ç§ï¼š

- ä¸€ä¸ªå˜é‡ï¼š `x`
- ä¸€ä¸ªå¯¹è±¡æ¨¡å¼ï¼š `{Â«propertiesÂ»}`
- ä¸€ä¸ªæ•°ç»„æ¨¡å¼ï¼š`[Â«elementsÂ»]`



æ¥ä¸‹æ¥çš„ä¸‰ä¸ªéƒ¨åˆ†æŒ‡å®šäº†åœ¨åŒ¹é…è¡¨è¾¾å¼ä¸­å¤„ç†è¿™ä¸‰ç§æƒ…å†µçš„è§„åˆ™ã€‚



<p id="2.2"></p>



### 2.2 å¯¹å˜é‡çš„è§„åˆ™

è§„åˆ™ `1`

```
// è§„åˆ™ 1
x â† value (åŒ…å« null å’Œ undefined)
x = value
```



<p id="2.3"></p>



### 2.3 å¯¹å¯¹è±¡æ¨¡å¼çš„è§„åˆ™

è§„åˆ™ `(2a)`:

```
{Â«propertiesÂ»} â† undefined (illegal value)
 
throw new TypeError();
```

è§„åˆ™ `(2b)`:

```
{Â«propertiesÂ»} â† null (illegal value)

throw new TypeError();
```

è§„åˆ™ `(2c)`:

```
{key: Â«patternÂ», Â«propertiesÂ»} â† obj

Â«patternÂ» â† obj.key  // è¡¨ç¤º obj.key åŒ¹é… pattern
{Â«propertiesÂ»} â† obj // è¡¨ç¤º obj å…¶ä½™å±æ€§åŒ¹é… properties
```

è§„åˆ™ `(2d)`:

```
{key: Â«patternÂ» = default_value, Â«propertiesÂ»} â† obj

const tmp = obj.key
if (tmp !== undefined) {
	Â«patternÂ» â† tmp  // å¦‚æœåŒ¹é…çš„å€¼ä¸ä¸º undefined åˆ™ç›´æ¥åŒ¹é…
} else {
	Â«patternÂ» â† default_value // å¦‚æœåŒ¹é…çš„å€¼ä¸ºundefined åˆ™å°† é»˜è®¤å€¼åŒ¹é…ç»™æ¨¡å¼
}
{Â«propertiesÂ»} â† obj
```

è§„åˆ™ `(2e)`:

```
{} â† obj (no properties left)

// We are finished
```

- è§„åˆ™ `2a` & `2b` å¤„ç†éæ³•å€¼
- è§„åˆ™ `2c-2e` å¾ªç¯éå†æ¨¡å¼çš„å±æ€§
- è§„åˆ™ `2d` è¡¨ç¤ºå¦‚æœæ²¡æœ‰åŒ¹é…åˆ° `obj` ä¸­çš„å±æ€§ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼



<p id="2.4"></p>



### 2.4 å¯¹æ•°ç»„æ¨¡å¼çš„è§„åˆ™

**æ•°ç»„æ¨¡å¼å’Œå¯è¿­ä»£**ã€‚æ•°ç»„è§£æ„ç®—æ³•ä»æ•°ç»„æ¨¡å¼å’Œå¯è¿­ä»£å¼€å§‹ï¼š

è§„åˆ™ `(3a)`:

```
[Â«elementsÂ»] â† non_iterable (illegal value)
if (!isIterable(non_iterable))

	throw new TypeError();
```

è§„åˆ™ `(3b)`:

```
[Â«elementsÂ»] â† iterable
if (isIterable(iterable)) // å¦‚æœæ˜¯å¯è¿­ä»£çš„

	const iterator = iterable[Symbol.iterator](); // è·å–è¿­ä»£å™¨
	Â«elementsÂ» â† iterator
```

è¾…åŠ©å‡½æ•°ï¼š

```js
function isIterable(value) {
  return (
    value !== null
    && typeof value === 'object'
    && typeof value[Symbol.iterator] === 'function' // å¯è¿­ä»£å¯¹è±¡åŒ…å« [Symbol.iterator] æ–¹æ³•
  )
}
```

**æ•°ç»„å…ƒç´ å’Œè¿­ä»£å™¨**ã€‚è¿™ä¸ªç®—æ³•ç»§ç»­ï¼š

- æ¨¡å¼å…ƒç´ ï¼ˆç®­å¤´å·¦ä¾§ `Â«elementsÂ»`ï¼‰
- è¿­ä»£å™¨é€šè¿‡å¯è¿­ä»£è·å–ï¼ˆç®­å¤´å³ä¾§ `iterator`ï¼‰

ä¸‹é¢æ˜¯è§„åˆ™ï¼š

è§„åˆ™ `(3c)`:

```
Â«patternÂ», Â«elementsÂ» â† iterator

Â«patternÂ» â† getNext(iterator) // æœ€åä¸€ä¸ªitemæ˜¯ undefined
Â«elementsÂ» â† iterator
```

è§„åˆ™ `(3d)`:

```
Â«patternÂ» = default_value, Â«elementsÂ» â† iterator

const tmp = getNext(iterator);  // æœ€åä¸€ä¸ªitemæ˜¯ undefined
if (tmp !== undefined) {
  Â«patternÂ» â† tmp
} else {
  Â«patternÂ» â† default_value
}
Â«elementsÂ» â† iterator
```

è§„åˆ™ `(3e)`:

```
, Â«elementsÂ» â† iterator (hole, elision) // `,` è¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ è·³è¿‡åŒ¹é…

getNext(iterator); // skip
Â«elementsÂ» â† iterator
```

è§„åˆ™ `(3f)`: (spreadingæ“ä½œç¬¦)

```
 ...Â«patternÂ» â† iterator  // (always last part!) å±•å¼€ç¬¦æ€»æ˜¯åœ¨æœ€å
 
const tmp = [];
for (const elem of iterator) {
  tmp.push(elem);
}
Â«patternÂ» â† tmp
```

è§„åˆ™ `(3g)`: 

```
â† iterator   // (no elements left) æ²¡æœ‰å‰©ä½™å…ƒç´ äº†

// We are finished
```

è¾…åŠ©å‡½æ•°ï¼š

```js
function getNext(iterator) {
  const { done, value } = iterator.next()
  return (done ? undefined : value)
}
```

**ä¸€ä¸ªè¿­ä»£å™¨ç»“æŸå’Œå¯¹è±¡ä¸­å±æ€§ç¼ºå¤±ç±»ä¼¼ã€‚ğŸ˜…**





<p id="3"></p>



## 3ï¸âƒ£ ç©ºå¯¹è±¡æ¨¡å¼å’Œç©ºæ•°ç»„æ¨¡å¼

è¿™ä¸ªç®—æ³•è§„åˆ™å­˜åœ¨æœ‰è¶£çš„ç»“æœï¼š*æˆ‘ä»¬å¯ä»¥è§£æ„ç©ºå¯¹è±¡æ¨¡å¼å’Œç©ºæ•°ç»„æ¨¡å¼*ã€‚ğŸ˜ (è¯‘è€…æ³¨ï¼šæ¨¡å¼æ˜¯ç®­å¤´å·¦ä¾§ï¼Œå€¼æ˜¯ç®­å¤´å³ä¾§ï¼Œ `Â«patternÂ» â† Â«valueÂ»`)

ç»™å®šä¸€ä¸ªç©ºå¯¹è±¡æ¨¡å¼ `{}`ï¼šå¦‚æœå¾…è§£æ„çš„å€¼æ—¢ä¸æ˜¯ `undefined` ä¹Ÿä¸æ˜¯ `null`ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿï¼Œå¦åˆ™ï¼Œå¦‚æœå¯¹ `undefined | null` è¿›è¡Œè§£æ„ï¼Œä¼šæŠ›å‡º `TypeError`

```js
// è¢«è§£æ„çš„æ—¢ä¸æ˜¯ `undefined` ä¹Ÿä¸æ˜¯ `null`
const {} = 123  // OK

// è§£æ„ null ç›´æ¥æŠ›å‡º TypeError
assert.throws(
  () => {
    const {} = null
  },
  /^TypeError: Cannot destructure 'null' as it is null.$/
)
```

ç»™å®šä¸€ä¸ªç©ºçš„æ•°ç»„æ¨¡å¼ `[]` ï¼š å¦‚æœè¢«è§£æ„çš„å€¼æ˜¯å¯è¿­ä»£çš„ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿï¼Œå¦åˆ™ï¼Œï¼Œä¼šæŠ›å‡º `TypeError`

```js
// å­—ç¬¦ä¸²æ˜¯å¯è¿­ä»£çš„
const [] = 'abc' // OK

assert.throws(
  () => {
    const [] = 123 // æ•°å­—æ˜¯ä¸å¯è¿­ä»£çš„
  },
  /^TypeError: 123 is not iterable$/
)
```

æ¢å¥è¯è®²ï¼š**ç©ºè§£æ„æ¨¡å¼ï¼ˆ`Empty destructuring patterns`ï¼‰ å¼ºåˆ¶ å€¼ï¼ˆ`value`ï¼‰å¿…é¡»ç¬¦åˆæŸç§ç‰¹è´¨ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæœ**



<p id="4"></p>



## 4ï¸âƒ£ åº”ç”¨è¯¥ç®—æ³•

ğŸ“š åœ¨JSä¸­ï¼Œå…·åå‚æ•°é€šè¿‡å¯¹è±¡è¿›è¡Œæ¨¡æ‹Ÿï¼šè°ƒç”¨è€…ï¼ˆ`the caller`ï¼Œ å‡½æ•°æ‰§è¡Œï¼‰ä½¿ç”¨å¯¹è±¡å­—é¢é‡ï¼Œè¢«è°ƒç”¨è€…ï¼ˆ`the callee` ï¼Œ å‡½æ•°å®šä¹‰ï¼‰ä½¿ç”¨è§£æ„ã€‚è¿™ç§æ¨¡æ‹Ÿå¯å‚è€ƒ [named-parameters - impatient-js](https://exploringjs.com/impatient-js/ch_callables.html#named-parameters) ã€‚ ä¸‹é¢ç¤ºä¾‹ğŸŒ°ï¼š`move1()`æœ‰2ä¸ªå‚æ•° `x` & `y` ï¼š

```js
function move1({x = 0, y = 0} = {}) { // A
  return [x, y]
}

assert.deepEqual(
  move1({x: 3, y: 8}),
  [3, 8]
)

assert.deepEqual(
  move1({x: 3}),
  [3, 0]
)

assert.deepEqual(
  move1({}),
  [0, 0]
)

assert.deepEqual(
  move1(),
  [0, 0]
)
```

`A` è¡Œä¸­æœ‰3ä¸ªé»˜è®¤å€¼ï¼š

- å‰2ä¸ªé»˜è®¤å€¼ï¼ˆ`{x = 0, y = 0}`ï¼‰å…è®¸æˆ‘ä»¬å¿½ç•¥ `x` & `y`
- ç¬¬3ä¸ªé»˜è®¤å€¼ï¼ˆ`{x = 0, y = 0} = {}`ï¼‰å…è®¸æˆ‘ä»¬è°ƒç”¨ `move1()` ä¸ä¼ å…¥å‚æ•°

ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åƒä¸Šé¢é‚£æ ·å®šä¹‰å‚æ•°ï¼Œè€Œä¸æ˜¯åƒä¸‹é¢å‘¢ï¼š

```js
function move2({x, y} = {x: 0, y: 0}) {
  return [x, y]
}
```

ä¸ºäº†æŸ¥çœ‹ä¸ºä»€ä¹ˆ `move1()` æ˜¯æ­£ç¡®çš„ï¼Œæˆ‘ä»¬å°†åœ¨2ä¸ªä¾‹å­ä¸­åŒæ—¶ç”¨2ä¸ªå‡½æ•°ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä¼ å…¥çš„å‚æ•°å¦‚ä½•é€šè¿‡ *åŒ¹é…* æ¥è§£é‡ŠğŸ˜ã€‚



<p id="4.1"></p>



### 4.1 èƒŒæ™¯ï¼šé€šè¿‡åŒ¹é…ä¼ å…¥å‚æ•°

å¯¹äºå‡½æ•°è°ƒç”¨ï¼Œ*å½¢å‚ï¼ˆåœ¨å‡½æ•°å®šä¹‰å†…ï¼‰ä¸å®å‚ï¼ˆåœ¨å‡½æ•°è°ƒç”¨å†…ï¼‰ç›¸åŒ¹é…*ã€‚ä½œä¸ºç¤ºä¾‹ï¼Œä¸‹é¢åˆ†åˆ«æ˜¯å‡½æ•°å®šä¹‰å’Œå‡½æ•°è°ƒç”¨ï¼š

```js
// å‡½æ•°å®šä¹‰
// a, b æ˜¯å½¢å‚
function func(a = 0, b = 0) {}

// å‡½æ•°è°ƒç”¨ 
// 1, 2æ˜¯å®å‚
func(1, 2)
```

å‚æ•° `a` & `b` çš„è®¾ç½®ç±»ä¼¼ä¸‹é¢è§£æ„ï¼š

```
[a=0, b=0] â† []
```



<p id="4.2"></p>



### 4.2 ä½¿ç”¨ move2()

æˆ‘ä»¬å…ˆçœ‹çœ‹å‡½æ•° `move2` ä¸­çš„è§£æ„æ•ˆæœã€‚

> **ç¤ºä¾‹1**ğŸŒ° è°ƒç”¨ `move2()`

 å¯¼è‡´ä¸‹é¢è§£æ„ï¼š

```
[{ x, y } = { x: 0, y: 0}] â† []
```

å·¦ä¾§çš„å•æ•°ç»„å…ƒç´ æ¨¡å¼æ²¡æœ‰åŒ¹é…åˆ°å³ä¾§çš„ç©ºæ•°ç»„å€¼ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ `{x, y}` åŒ¹é…é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯æ¥è‡ªå³ä¾§çš„æ•°æ®ï¼ˆè§„åˆ™ `3b` & `3d`ï¼‰:

```
{ x, y } â† { x: 0, y: 0 }
```

å·¦ä¾§åŒ…å« *å±æ€§å€¼ç®€å†™ï¼ˆ`property value shorthands`ï¼‰*ã€‚å®ƒå®é™…çš„å½¢å¼ä¸ºï¼š

```
{ x: x, y: y } â† { x: 0, y: 0 }
```

è¿™ä¸ªè§£æ„å¯¼è‡´ä¸‹é¢2ä¸ªèµ‹å€¼ï¼ˆè§„åˆ™ [2c](#2.4) & è§„åˆ™ [1](#2.1)ï¼‰:

```js
x = 0;
y = 0;
```

è¿™æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ä½†æ˜¯ï¼Œä¸‹é¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°±æ²¡æœ‰é‚£ä¹ˆå¹¸è¿äº†ã€‚



>  **ç¤ºä¾‹2**ğŸŒ° æˆ‘ä»¬è°ƒç”¨ `move2({z: 3})`

è¿™å°†å¯¼è‡´å¦‚ä¸‹è§£æ„ï¼š

```
[{ x, y } = { x: 0, y: 0}] â† [{ z: 3 }]
```

å³ä¾§åœ¨æ•°ç»„ç´¢å¼• `0` ä½ç½®æœ‰ä¸€ä¸ªæ•°ç»„å…ƒç´ ã€‚å› æ­¤ï¼Œé»˜è®¤å€¼è¢«å¿½ç•¥ï¼Œä¸‹ä¸€ä¸ªæ­¥éª¤æ˜¯ï¼ˆè§„åˆ™ [3d](#2.4)ï¼‰:

```
{ x, y } â† { z: 3 }
```

è¿™å¯¼è‡´xå’Œyéƒ½è¢«è®¾ç½®ä¸º `undefined`ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ğŸ˜¥ã€‚é—®é¢˜åœ¨äº `{x, y}` æ²¡æœ‰åŒ¹é…é»˜è®¤å€¼ï¼Œè€Œæ˜¯åŒ¹é…åˆ°äº† `{z: 3}`



<p id="4.3"></p>



### 4.3 ä½¿ç”¨ move1()

>  **ç¤ºä¾‹1**ğŸŒ° è°ƒç”¨ `move1()` 

å¯¼è‡´ä¸‹é¢è§£æ„ï¼š

```
[{ x=0, y=0} = {}] â† []
```

å³ä¾§æ•°ç»„å…ƒç´ ä¸ºç©ºï¼Œå› æ­¤ä½¿ç”¨é»˜è®¤å€¼ï¼ˆè§„åˆ™ [3d](#2.4)ï¼‰:

```
{x=0, y=0} â† {}
```

å·¦ä¾§åŒ…å«å±æ€§ç®€å†™ï¼Œç›¸å½“äºï¼š

```
{x: x=0, y: y=0} â† {}
```

`x` å’Œ `y` éƒ½æ²¡æœ‰åŒ¹é…åˆ°å³ä¾§çš„ç©ºå¯¹è±¡å€¼ã€‚å› æ­¤ï¼Œé»˜è®¤å€¼è¢«ä½¿ç”¨ï¼Œä¸‹é¢ç»“æ„è¢«æ‰§è¡Œ ï¼ˆè§„åˆ™ [2d](#2.3)ï¼‰:

```
x â† 0
y â† 0
```

è¿™å°†å¯¼è‡´ä¸‹é¢èµ‹å€¼ï¼ˆè§„åˆ™ [1](#2.1)ï¼‰ï¼š

```js
x = 0
y = 0
```

è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚





> **ç¤ºä¾‹2**ğŸŒ° move1({z: 3})

è§£æ„ï¼š

```
[{x=0, y=0} = {}] â† [{ z: 3 }]
```

æ•°ç»„æ¨¡å¼ç¬¬ä¸€ä¸ªå…ƒç´ åŒ¹é…å³ä¾§ï¼Œè¿™ä¸ªåŒ¹é…å¯¼è‡´è§£æ„ç»§ç»­ï¼ˆè§„åˆ™ [3d](#2.4)ï¼‰:

```
{ x=0, y=0 } â† { z: 3 }
```

å’Œç¤ºä¾‹1ä¸€æ ·ï¼Œå³ä¾§ä¸å­˜åœ¨x,yå±æ€§ï¼Œå› æ­¤é»˜è®¤å€¼è¢«ä½¿ç”¨ï¼š

```js
x = 0
y = 0
```

è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ğŸ¤©ã€‚ç°åœ¨ `x & y` å’Œ `{z: 3}` å†å»åŒ¹é…ä¸å†æ˜¯é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬æ‹¥æœ‰æœ¬åœ°é»˜è®¤å€¼ã€‚



<p id="4.4"></p>



### 4.4 æ€»ç»“ï¼šé»˜è®¤å€¼æ˜¯æ¨¡å¼éƒ¨åˆ†çš„ä¸€ä¸ªåŠŸèƒ½

ä¸Šé¢ä¾‹å­å±•ç¤ºäº†é»˜è®¤å€¼æ˜¯æ¨¡å¼éƒ¨åˆ†ï¼ˆå³æ¨¡å¼åŒ¹é…çš„å·¦ä¾§éƒ¨åˆ†ï¼Œå¯¹è±¡å±æ€§æˆ–è€…æ•°ç»„å…ƒç´ ï¼‰ã€‚å¦‚æœæŸä¸ªéƒ¨åˆ†æ²¡æœ‰åŒ¹é…æˆ–è€…åŒ¹é…äº† `undefined`ï¼Œåˆ™é»˜è®¤å€¼å°†ä¼šè¢«ä½¿ç”¨ã€‚å³ï¼Œ**ä½¿ç”¨æ¨¡å¼åŒ¹é…é»˜è®¤å€¼ä»£æ›¿**ã€‚ğŸ˜





è¯‘è€…æ³¨ï¼š

1. ä»æ¨¡å¼åŒ¹é…çš„è§’åº¦è®²è§£è§£æ„
2. æ¨¡å¼åŒ¹é…åˆ†ä¸º **å·¦ä¾§ æ¨¡å¼** + **å³ä¾§ å€¼**
3. æ¨¡å¼åŒ¹é…çš„3ç§æƒ…å½¢
   1. å˜é‡èµ‹å€¼
   2. å¯¹è±¡æ¨¡å¼åŒ¹é…
   3. æ•°ç»„æ¨¡å¼åŒ¹é…
4. ç©ºå¯¹è±¡æ¨¡å¼å’Œç©ºæ•°ç»„æ¨¡å¼åŒ¹é…å¯¹å³ä¾§å€¼éƒ¨åˆ†çš„è¦æ±‚
   1. ç©ºå¯¹è±¡æ¨¡å¼è¦æ±‚å€¼ä¸èƒ½ä¸º `null` | `undefined` ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯
   2. ç©ºæ•°ç»„æ¨¡å¼è¦æ±‚å€¼å…·æœ‰å¯è¿­ä»£ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯
5. ä¸åŒé»˜è®¤å‚æ•°çš„å†™æ³•ï¼Œä¼šå¯¼è‡´ä¸åŒçš„æ¨¡å¼åŒ¹é…ï¼Œä»è€Œäº§ç”Ÿçš„æ•ˆæœä¹Ÿæ˜¯ä¸åŒçš„



2022å¹´07æœˆ14æ—¥17:59:59
